<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flipbook Portfolio - Edarch</title>
    
    <meta property="og:title" content="Edarch Design Studio - Portfolio">
    <meta property="og:description" content="Explore the interactive architectural portfolio of Edarch Design Studio.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://portfolio.edarch.studio/flipbook_en.html">
    <meta property="og:image" content="https://portfolio.edarch.studio/portf/1.jpg">
    <meta property="og:image:width" content="1000">
    <meta property="og:image:height" content="300">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="navbar">
        <div class="container">
            <a class="logo">Ed’arch Design Studio</a>
            <nav>
                <ul>
                    <li><a href="iletisim_en.html">Contact</a></li>
                    <li><a href="flipbook_en.html">Portfolio</a></li> 
                </ul>
                
                <ul class="lang-switcher">
                    <li><a href="index.html">TR</a></li>
                    <li><span>/</span></li>
                    <li><a href="flipbook_en.html" class="active">EN</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        
    <div class="flipbook-wrapper">
        
        <button id="global-zoom-button">
            <img src="icons/zoom.png" alt="Zoom In">
        </button>
        
        <button id="prev-page" class="nav-button">&lt;</button>
        <button id="next-page" class="nav-button">&gt;</button>
        
        <div class="flipbook">
            <div class="hard">
                <img src="portf/1.jpg" alt="Page 1: Front Cover" style="width: 100%; height: 100%; object-fit: cover;">
            </div>
            
            <div class="hard"> 
                <img src="portf/2 (ing).jpg" alt="Page 2: Inside Front Cover" style="width: 100%; height: 100%; object-fit: cover;">
            </div> 
            
            <div><img src="portf/3.jpg" alt="Page 3" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/4 (ing).jpg" alt="Page 4" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/5.jpg" alt="Page 5" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/6.jpg" alt="Page 6" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/7.jpg" alt="Page 7" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/8 (ing).jpg" alt="Page 8" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/11.jpg" alt="Page 9" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/10.jpg" alt="Page 10" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/12.jpg" alt="Page 11" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/13 (ing).jpg" alt="Page 12" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/14.jpg" alt="Page 13" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/15 (ing).jpg" alt="Page 14" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/16.jpg" alt="Page 15" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/17.jpg" alt="Page 16" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/18.jpg" alt="Page 17" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/19 (ing).jpg" alt="Page 18" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/20.jpg" alt="Page 19" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/21.jpg" alt="Page 20" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/22.jpg" alt="Page 21" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/23.jpg" alt="Page 22" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/24.jpg" alt="Page 23" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/25 ing.jpg" alt="Page 24" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/26.jpg" alt="Page 25" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/27 ing.jpg" alt="Page 26" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/28.jpg" alt="Page 27" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/29.jpg" alt="Page 28" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/30.jpg" alt="Page 29" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/31 ing.jpg" alt="Page 30" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/32.jpg" alt="Page 31" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/33(ing).jpg" alt="Page 32" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/34.jpg" alt="Page 33" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/35(ing).jpg" alt="Page 34" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/36.jpg" alt="Page 35" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/37 (ing).jpg" alt="Page 36" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/38.jpg" alt="Page 37" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/39 ing.jpg" alt="Page 38" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/40.jpg" alt="Page 39" style="width: 100%; height: 100%; object-fit: cover;"></div>
            <div><img src="portf/41.jpg" alt="Page 40" style="width: 100%; height: 100%; object-fit: cover;"></div>

            <div class="hard"> 
                <img src="portf/42 ing.jpg" alt="Page 41: Inside Back Cover" style="width: 100%; height: 100%; object-fit: cover;">
            </div>
            
            <div class="hard">
                 <img src="portf/41.jpg" alt="Page 42: Back Cover" style="width: 100%; height: 100%; object-fit: cover;">
            </div>
            </div>
        
    </div>
</main>


    <footer>
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px;">
            <p style="margin: 0;">&copy; 2025 Edarch Design Studio. All rights reserved.</p>

            <div style="display: flex; gap: 15px;"> <a href="https://www.instagram.com/edarch.studio_/" 
                target="_blank" 
                aria-label="Instagram ">
                    <img src="icons/instagram.png" 
                        alt="Instagram Logo" 
                        style="width: 24px; height: 24px; vertical-align: middle; border: none;">
                </a>

                <a href="https://www.behance.net/edarchstudio" 
                target="_blank" 
                aria-label="Behance ">
                    <img src="icons/be.png" 
                        alt="Behance Logo" 
                        style="width: 24px; height: 24px; vertical-align: middle; border: none;">
                </a>

            </div> 
            </div>
    </footer>

    <div id="lightbox-modal" class="lightbox-modal">
        <span class="lightbox-close">&times;</span>
        <img class="lightbox-content" id="lightbox-img">
        <button id="lightbox-prev" class="lightbox-nav-btn">&lt;</button>
        <button id="lightbox-next" class="lightbox-nav-btn">&gt;</button>
    </div>
    
    <script src="jquery.js"></script>
    <script src="turn.js"></script>

    <script>
    $(document).ready(function() {
        
        var flipbook = $(".flipbook");
        var currentDisplayMode;
        
        // Lightbox elementleri
        var modal = $("#lightbox-modal");
        var modalImg = $("#lightbox-img");
        var closeBtn = $(".lightbox-close");
        var globalZoomBtn = $("#global-zoom-button");
        var lightboxPrevBtn = $("#lightbox-prev");
        var lightboxNextBtn = $("#lightbox-next");

        // Hata Çözümü: Tüm resim yollarını saklamak için Array (Liste)
        var allPageImages = [];
        var totalPages = 0;
        var currentLightboxPage = 0; 

        // 1. Resim yollarını topla (turn.js gizlemeden önce)
        totalPages = flipbook.children().length;
        flipbook.children().each(function() {
            allPageImages.push($(this).find('img').attr('src'));
        });


        // 2. Flipbook'u Ayarlama Fonksiyonu
        function setupFlipbook() {
            var windowWidth = $(window).width();
            var newDisplayMode, newBookWidth, newBookHeight;

            if (windowWidth < 768) { 
                newDisplayMode = "single";
                newBookWidth = Math.round(windowWidth * 0.85);
                newBookHeight = Math.round(newBookWidth * (300 / 500)); 
            } else { 
                newDisplayMode = "double";
                newBookWidth = 1000;
                newBookHeight = 300;
            }

            if (flipbook.turn("is") && currentDisplayMode !== newDisplayMode) {
                window.location.reload();
                return;
            }
            
            if (flipbook.turn("is")) {
                flipbook.turn("size", newBookWidth, newBookHeight);
                flipbook.turn("center");
            } else {
                flipbook.turn({
                    width: newBookWidth,
                    height: newBookHeight,
                    display: newDisplayMode,
                    autoCenter: true,
                    gradients: true,
                    elevation: 100
                });
                currentDisplayMode = newDisplayMode;
            }
        }

        // 3. LightBox içeriğini (Resim Listesini kullanarak) günceller
        function updateLightboxImage(pageIndex) {
            if (pageIndex < 1 || pageIndex > totalPages) {
                return; 
            }
            
            var imgSource = allPageImages[pageIndex - 1]; // Diziler 0'dan başladığı için -1

            if (imgSource) {
                modalImg.attr('src', imgSource);
                currentLightboxPage = pageIndex;
                
                lightboxPrevBtn.toggle(currentLightboxPage > 1);
                lightboxNextBtn.toggle(currentLightboxPage < totalPages);
            }
        }
        
        // 4. İlk yüklemede başlat
        setupFlipbook();

        // 5. Flipbook Navigasyon Butonları
        $("#prev-page").click(function(e) { e.preventDefault(); flipbook.turn("previous"); });
        $("#next-page").click(function(e) { e.preventDefault(); flipbook.turn("next"); });

        // 6. Ekran yeniden boyutlandırıldığında
        var resizeTimer;
        $(window).on('resize', function() {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(setupFlipbook, 250);
        });
        
        // 7. GENEL BÜYÜTME İŞLEVİ
        globalZoomBtn.on('click', function(e) {
            e.preventDefault(); 
            e.stopPropagation();

            var currentPageDiv = flipbook.turn('page'); 
            var view = flipbook.turn('view', currentPageDiv);
            var pageIndex = view.pop() || view.pop();

            if (pageIndex === 0) { pageIndex = 1; }

            if (pageIndex) {
                modal.css('display', 'flex'); 
                updateLightboxImage(pageIndex);
                $(".flipbook").turn("disable", true); 
            }
        });

        // 8. LIGHTBOX NAVİGASYON İŞLEVİ
        lightboxPrevBtn.on('click', function(e) {
            e.stopPropagation();
            updateLightboxImage(currentLightboxPage - 1);
        });

        lightboxNextBtn.on('click', function(e) {
            e.stopPropagation();
            updateLightboxImage(currentLightboxPage + 1);
        });

        // 9. Kapatma Fonksiyonları
        function closeLightbox() {
             modal.css('display', 'none'); 
             $(".flipbook").turn("disable", false);
             currentLightboxPage = 0; 
        }

        closeBtn.on('click', closeLightbox);
        
        modal.on('click', function(e) {
            if (e.target.id === 'lightbox-modal') {
                closeLightbox();
            }
        });

        // 10. *** YENİ: KLAVYE YÖN TUŞLARI İŞLEVİ (HEM FLIPBOOK HEM LIGHTBOX İÇİN) ***
        $(document).on('keydown', function(e) {
            
            // Kullanıcı bir forma (iletişim sayfası gibi) yazıyorsa tuşlar çalışmasın
            if ($(e.target).is('input, textarea')) {
                return;
            }
            
            if (modal.is(':visible')) {
                // --- MODAL (BÜYÜTME) AÇIKKEN ---
                if (e.key === "Escape") {
                    closeLightbox();
                } else if (e.key === "ArrowLeft") {
                    // Sol ok (Modalda önceki resim)
                    updateLightboxImage(currentLightboxPage - 1);
                } else if (e.key === "ArrowRight") {
                    // Sağ ok (Modalda sonraki resim)
                    updateLightboxImage(currentLightboxPage + 1);
                }
            } else {
                // --- MODAL KAPALIYKEN (FLIPBOOK'TA) ---
                if (e.key === "ArrowLeft") {
                    // Sol ok (Flipbook önceki sayfa)
                    e.preventDefault(); // Sayfanın kaymasını engelle
                    flipbook.turn("previous");
                } else if (e.key === "ArrowRight") {
                    // Sağ ok (Flipbook sonraki sayfa)
                    e.preventDefault(); // Sayfanın kaymasını engelle
                    flipbook.turn("next");
                }
            }
        });

    });
    </script>

</body>
</html>