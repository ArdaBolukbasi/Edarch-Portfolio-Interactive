<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flipbook Portfolio - Edarch</title>

    <meta property="og:title" content="Edarch Design Studio - Portfolio">
    <meta property="og:description" content="Explore the interactive architectural portfolio of Edarch Design Studio.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://portfolio.edarch.studio/flipbook_en.html">
    <meta property="og:image" content="https://portfolio.edarch.studio/portf/1.jpg">
    <meta property="og:image:width" content="1000">
    <meta property="og:image:height" content="300">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="icons/logo.png">
</head>

<body>

    <header class="navbar">
        <div class="container">
            <a class="logo">Ed’arch Design Studio</a>
            <nav>
                <ul>
                    <li><a href="iletisim_en.html">Contact</a></li>
                    <li><a href="flipbook_en.html">Portfolio</a></li>
                    <li>
                        <a href="360_view_en.html?project=salon" class="dropdown-arrow">360 View</a>
                        <div class="dropdown-content">
                            <a href="360_view_en.html?project=salon">Modern Living Room</a>
                            <a href="360_view_en.html?project=bedroom">Bedroom</a>
                            <a href="360_view_en.html?project=kitchen">Kitchen</a>
                        </div>
                    </li>
                </ul>

                <ul class="lang-switcher">
                    <li><a href="index.html">TR</a></li>
                    <li><span>/</span></li>
                    <li><a href="flipbook_en.html" class="active">EN</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">

        <div class="flipbook-wrapper">

            <button id="global-zoom-button">
                <img src="icons/zoom.png" alt="Zoom In">
            </button>

            <button id="prev-page" class="nav-button">&lt;</button>
            <button id="next-page" class="nav-button">&gt;</button>

            <div class="flipbook">
                <div class="hard">
                    <img src="portf/kapak.png" alt="Cover 1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/hakımda(ing).png" alt="About"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/kapakbos.png" alt="Empty" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/1(ing).png" alt="Project 1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/1,1.png" alt="Project 1.1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/1,2.png" alt="Project 1.2" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/1,3.png" alt="Project 1.3" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/2(ing).png" alt="Project 2" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/2,1.png" alt="Project 2.1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/2,2.png" alt="Project 2.2" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/2,3.png" alt="Project 2.3" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/2,4.png" alt="Project 2.4" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/2,5.png" alt="Project 2.5" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/3(ing).png" alt="Project 3" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/3,1.png" alt="Project 3.1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/4(ing).png" alt="Project 4" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/4,1.png" alt="Project 4.1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/4,2.png" alt="Project 4.2" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/4,3.png" alt="Project 4.3" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/5(ing).png" alt="Project 5" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/5,1.png" alt="Project 5.1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/5,2.png" alt="Project 5.2" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/5,3.png" alt="Project 5.3" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/6(ing).png" alt="Project 6" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/6,1.png" alt="Project 6.1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/7(ing).png" alt="Project 7" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/7,1.png" alt="Project 7.1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/7,2.png" alt="Project 7.2" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/7,3.png" alt="Project 7.3" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/8(ing).png" alt="Project 8" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/8,1.png" alt="Project 8.1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/8,2.png" alt="Project 8.2" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/8,3.png" alt="Project 8.3" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/9(ing).png" alt="Project 9" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/9,1.png" alt="Project 9.1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/10(ing).png" alt="Project 10"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/10,1.png" alt="Project 10,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/11(ing).png" alt="Project 11"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/11,1.png" alt="Project 11,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/12(İng).png" alt="Project 12"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/12,1.png" alt="Project 12,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/13(ing).png" alt="Project 13"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/13,1.png" alt="Project 13,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/13,2.png" alt="Project 13,2" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/13,3.png" alt="Project 13,3" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/13,4.png" alt="Project 13,4" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/13,5.png" alt="Project 13,5" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/13,6.png" alt="Project 13,6" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/13,7.png" alt="Project 13,7" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/14(ing).png" alt="Project 14"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/14,1.png" alt="Project 14,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/15(ing).png" alt="Project 15"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/15,1.png" alt="Project 15,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/16(ing).png" alt="Project 16"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/16,1.png" alt="Project 16,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/16,2.png" alt="Project 16,2" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/16,3.png" alt="Project 16,3" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/17(ing).png" alt="Project 17"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/17,1.png" alt="Project 17,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/17,2.png" alt="Project 17,2" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/17,3.png" alt="Project 17,3" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/18(ing).png" alt="Project 18"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/18,1.png" alt="Project 18,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/19(ing).png" alt="Project 19"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/19,1.png" alt="Project 19,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/20(ing).png" alt="Project 20"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/20,1.png" alt="Project 20,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/20,2.png" alt="Project 20,2" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/20,3.png" alt="Project 20,3" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/21(ing).png" alt="Project 21"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/21,1.png" alt="Project 21,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/21,2.png" alt="Project 21,2" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/21,3.png" alt="Project 21,3" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/22(ing).png" alt="Project 22"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/22,1.png" alt="Project 22,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/23(ing).png" alt="Project 23"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/23,1.png" alt="Project 23,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/24(ing).png" alt="Project 24"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/24,1.png" alt="Project 24,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/25(İng).png" alt="Project 25"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/25,1.png" alt="Project 25,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/26(ing).png" alt="Project 26"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/26,1.png" alt="Project 26,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div><img src="portf/27(ing).png" alt="Project 27"
                        style="width: 100%; height: 100%; object-fit: cover;"></div>
                <div><img src="portf/27,1.png" alt="Project 27,1" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="hard">
                    <img src="portf/arkakapakbos.png" alt="Inside Back"
                        style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="hard">
                    <img src="portf/arkakapak(ing).png" alt="Back Cover"
                        style="width: 100%; height: 100%; object-fit: cover;">
                </div>
            </div>
        </div>

    </main>

    <button id="mobile-zoom-button" style="display:none;" onclick="if(window.openZoom) window.openZoom()">
        <img src="icons/zoom.png" alt="Zoom In">
    </button>


    <footer>
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px;">
            <p style="margin: 0;">&copy; 2025 Edarch Design Studio. All rights reserved.</p>

            <div style="display: flex; gap: 15px;"> <a href="https://www.instagram.com/edarch.studio_/" target="_blank"
                    aria-label="Instagram ">
                    <img src="icons/instagram.png" alt="Instagram Logo"
                        style="width: 24px; height: 24px; vertical-align: middle; border: none;">
                </a>

                <a href="https://www.behance.net/edarchstudio" target="_blank" aria-label="Behance ">
                    <img src="icons/be.png" alt="Behance Logo"
                        style="width: 24px; height: 24px; vertical-align: middle; border: none;">
                </a>

            </div>
        </div>
    </footer>

    <div id="lightbox-modal" class="lightbox-modal">
        <span class="lightbox-close">&times;</span>
        <img class="lightbox-content" id="lightbox-img">
        <button id="lightbox-prev" class="lightbox-nav-btn">&lt;</button>
        <button id="lightbox-next" class="lightbox-nav-btn">&gt;</button>
    </div>

    <script src="jquery.js"></script>
    <script src="turn.js"></script>

    <script>
        $(document).ready(function () {

            var flipbook = $(".flipbook");
            var currentDisplayMode;

            // Lightbox elementleri
            var modal = $("#lightbox-modal");
            var modalImg = $("#lightbox-img");
            var closeBtn = $(".lightbox-close");
            var globalZoomBtn = $("#global-zoom-button");
            var lightboxPrevBtn = $("#lightbox-prev");
            var lightboxNextBtn = $("#lightbox-next");

            // Hata Çözümü: Tüm resim yollarını saklamak için Array (Liste)
            var allPageImages = [];
            var totalPages = 0;
            var currentLightboxPage = 0;

            // 1. Resim yollarını topla (turn.js gizlemeden önce)
            totalPages = flipbook.children().length;
            flipbook.children().each(function () {
                allPageImages.push($(this).find('img').attr('src'));
            });


            // 2. Flipbook'u Ayarlama Fonksiyonu
            function setupFlipbook() {
                var windowWidth = $(window).width();
                var newDisplayMode, newBookWidth, newBookHeight;

                if (windowWidth < 768) {
                    newDisplayMode = "single";
                    newBookWidth = Math.round(windowWidth * 0.85);
                    newBookHeight = Math.round(newBookWidth * (300 / 500));
                } else {
                    newDisplayMode = "double";
                    newBookWidth = 1000;
                    newBookHeight = 300;
                }

                if (flipbook.turn("is") && currentDisplayMode !== newDisplayMode) {
                    window.location.reload();
                    return;
                }

                if (flipbook.turn("is")) {
                    flipbook.turn("size", newBookWidth, newBookHeight);
                    flipbook.turn("center");
                } else {
                    flipbook.turn({
                        width: newBookWidth,
                        height: newBookHeight,
                        display: newDisplayMode,
                        autoCenter: true,
                        gradients: true,
                        elevation: 100
                    });
                    currentDisplayMode = newDisplayMode;
                }
            }

            // 3. LightBox içeriğini (Resim Listesini kullanarak) günceller
            function updateLightboxImage(pageIndex) {
                if (pageIndex < 1 || pageIndex > totalPages) {
                    return;
                }

                var imgSource = allPageImages[pageIndex - 1]; // Diziler 0'dan başladığı için -1

                if (imgSource) {
                    modalImg.attr('src', imgSource);
                    currentLightboxPage = pageIndex;

                    lightboxPrevBtn.toggle(currentLightboxPage > 1);
                    lightboxNextBtn.toggle(currentLightboxPage < totalPages);
                }
            }

            // 4. İlk yüklemede başlat
            setupFlipbook();

            // 5. Flipbook Navigasyon Butonları
            $("#prev-page").click(function (e) { e.preventDefault(); flipbook.turn("previous"); });
            $("#next-page").click(function (e) { e.preventDefault(); flipbook.turn("next"); });

            // 6. Ekran yeniden boyutlandırıldığında
            var resizeTimer;
            $(window).on('resize', function () {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(setupFlipbook, 250);
            });

            // 7. GENEL BÜYÜTME İŞLEVİ (Fonksiyon olarak ayrıldı)
            function openZoom() {
                var currentPageDiv = flipbook.turn('page');
                var view = flipbook.turn('view', currentPageDiv);
                var pageIndex = view.pop() || view.pop();

                if (pageIndex === 0) { pageIndex = 1; }

                if (pageIndex) {
                    modal.css('display', 'flex');
                    updateLightboxImage(pageIndex);
                    $(".flipbook").turn("disable", true);
                }
            }
            window.openZoom = openZoom; // Global accessible

            globalZoomBtn.on('click', function (e) {
                e.preventDefault();
                e.stopPropagation();
                openZoom();
            });

            // *** YENİ: MOBİL ZOOM BUTONU İÇİN TIKLAMA OLAYI ***
            $("#mobile-zoom-button").on('click', function (e) {
                e.preventDefault();
                e.stopPropagation();
                openZoom();
            });

            // *** MOBİL İÇİN RESME TIKLAYINCA BÜYÜTME ***
            if ($(window).width() < 768) {
                $(".flipbook").on("click", "img", function (e) {
                    openZoom();
                });
            }

            // 8. LIGHTBOX NAVİGASYON İŞLEVİ
            lightboxPrevBtn.on('click', function (e) {
                e.stopPropagation();
                updateLightboxImage(currentLightboxPage - 1);
            });

            lightboxNextBtn.on('click', function (e) {
                e.stopPropagation();
                updateLightboxImage(currentLightboxPage + 1);
            });

            // 9. Kapatma Fonksiyonları
            function closeLightbox() {
                modal.css('display', 'none');
                $(".flipbook").turn("disable", false);
                currentLightboxPage = 0;
            }

            closeBtn.on('click', closeLightbox);

            modal.on('click', function (e) {
                if (e.target.id === 'lightbox-modal') {
                    closeLightbox();
                }
            });

            // 10. *** YENİ: KLAVYE YÖN TUŞLARI İŞLEVİ (HEM FLIPBOOK HEM LIGHTBOX İÇİN) ***
            $(document).on('keydown', function (e) {

                // Kullanıcı bir forma (iletişim sayfası gibi) yazıyorsa tuşlar çalışmasın
                if ($(e.target).is('input, textarea')) {
                    return;
                }

                if (modal.is(':visible')) {
                    // --- MODAL (BÜYÜTME) AÇIKKEN ---
                    if (e.key === "Escape") {
                        closeLightbox();
                    } else if (e.key === "ArrowLeft") {
                        // Sol ok (Modalda önceki resim)
                        updateLightboxImage(currentLightboxPage - 1);
                    } else if (e.key === "ArrowRight") {
                        // Sağ ok (Modalda sonraki resim)
                        updateLightboxImage(currentLightboxPage + 1);
                    }
                } else {
                    // --- MODAL KAPALIYKEN (FLIPBOOK'TA) ---
                    if (e.key === "ArrowLeft") {
                        // Sol ok (Flipbook önceki sayfa)
                        e.preventDefault(); // Sayfanın kaymasını engelle
                        flipbook.turn("previous");
                    } else if (e.key === "ArrowRight") {
                        // Sağ ok (Flipbook sonraki sayfa)
                        e.preventDefault(); // Sayfanın kaymasını engelle
                        flipbook.turn("next");
                    }
                }
            });

        });
    </script>

</body>

</html>